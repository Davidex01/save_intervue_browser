 safe_interview_browser

```md
 Safe Interview

Браузерная платформа для автоматизированных технических интервью с ИИ‑интервьюером.  
Кандидат пишет код и отвечает на теоретические вопросы в браузере, задачи генерируются на бэкенде, результаты автоматически оцениваются и отображаются в виде отчёта.

 1. Требования

- Node.js 18+
- npm 9+ (или совместимая версия)
- Python 3.10+
- pip

Репозиторий имеет структуру:

```text
.
├─ backend/    FastAPI + генерация задач
└─ frontend/   React + Vite
```



 2. Установка и запуск

 2.1. Бэкенд (FastAPI)

```bash
cd backend

 (опционально) виртуальное окружение
python -m venv venv
 Windows:
 .\venv\Scripts\activate
 Linux/macOS:
 source venv/bin/activate

pip install -r requirements.txt
 или, если файла нет:
 pip install fastapi uvicorn "pydantic[email]" python-multipart
 + зависимости для generation.py / domain_tasks_generator.py
```

Запуск сервера:

```bash
uvicorn backend:app --reload --host 0.0.0.0 --port 8000
```

Бэкенд будет доступен по адресу:

- Swagger‑документация: http://localhost:8000/docs

 2.2. Фронтенд (React + Vite)

В другом терминале:

```bash
cd frontend
npm install
npm run dev
```

Фронт будет доступен по адресу:

- http://localhost:5173/

> В `frontend/vite.config.js` настроен proxy `/api → http://localhost:8000`, поэтому фронт и бэк работают вместе без ручной настройки CORS.



 3. Навигация и сценарии использования

 3.1. Главная страница `/`

Содержимое:

- Описание платформы.
- Кнопки:
  - Начать интервью — открывает окно для ввода токена приглашения.
  - Демо для компаний — переход в демо‑режим (`/demo`).
  - Перейти в мастерскую — отображается только для залогиненных HR, ведёт в мастерскую (`/hr/workshop`).

 Начать интервью

1. Нажать Начать интервью.
2. Ввести выданный токен (например, `int_1`).
3. Переход на `/session/:token` — экран согласия.
4. После согласия — переход на `/session/:token/interview`.



 3.2. Демо‑режим

 `/demo`

Краткое описание демо‑интервью. Кнопка:

- Начать демо‑интервью → `/demo/interview`.

 `/demo/interview`

Состоит из:

- Верхняя панель: текущая демо‑задача и таймер.
- Левая колонка: условие задачи и навигация между задачами.
- Правая колонка:
  - для 3 первых задач — редактор Python‑кода;
  - для 4‑й и 5‑й — поле для текстового ответа.

Кнопка:

- Отправить и перейти к следующей (для первых 4 задач),
- Отправить и завершить демо (для последней).

Внизу — блок с кнопкой Вернуться на главную.

 `/demo/report`

Показывает демонстрационный итоговый отчёт: как выглядит страница с результатами интервью (метрики, задачи и т.п.).



 3.3. Интервью по токену (для кандидата)

 `/session/:token`

Экран согласия:

- Краткое описание процесса и правил (включая античит).
- Чекбоксы подтверждения.
- Кнопки:
  - Начать интервью → `/session/:token/interview`,
  - Отказаться → `/session/:token/declined`.

 `/session/:token/interview`

Рабочее пространство настоящего интервью:

- Верхняя панель:
  - “Задача X из N”.
  - Таймер до конца интервью.

- Левая колонка:
  - Условие текущей задачи:
    - для кодовых задач — текст в `statement`, примеры ввода/вывода;
    - для теоретических — текст вопроса из `question`.
  - Кнопки Предыдущая задача / Следующая задача.

- Правая колонка:
  - для задач из `coding_tasks` — редактор Python‑кода (`solution.py`);
  - для задач из `theory_tasks` — поле для развёрнутого текстового ответа.

Сохранение ответов:

- код и текстовые ответы хранятся по каждой задаче;
- при переключении задач поля заполняются уже введённым ответом (если он был).

Завершение:

- на последней задаче, при нажатии Отправить ответ/решение:
  - фронт собирает все ответы по задачам;
  - отправляет на бэкенд `POST /api/interview/:token/submit` с JSON.
  - бэкенд проверяет решения (через тесты и нейросеть для теории) и возвращает фидбек;
  - фронт перенаправляет на `/session/:token/report`, передавая фидбек в `location.state`.

 `/session/:token/report`

Страница итогового отчёта по реальному интервью.

- Если пользователь только что завершил интервью:
  - `SessionInterviewPage` передаёт результат проверки (`submitResult`) через `navigate(..., { state })`.
  - `SessionReportPage` читает этот результат и отображает:

    - Сводные показатели:
      - Алгоритмические задачи — процент успешно пройденных тестов.
      - Теоретические вопросы — процент зачтённых ответов.
    - Блок “Алгоритмические задачи”:
      - список задач с уровнем (`easy`, `medium`, `hard`),
      - статус: задача решена / не решена,
      - при ошибке — номер первого упавшего теста.
    - Блок “Теоретические вопросы”:
      - список вопросов с уровнем,
      - статус: ответ отсутствует / засчитан / не засчитан.

- Кнопка На главную возвращает на `/`.

> Если отчёт открыт напрямую, без `submitResult` в `state`, выводится сообщение, что результаты недоступны (подготовка к возможному будущему `GET /api/interview/:token/result`).



 3.4. Мастерская HR

 `/hr/workshop`

Страница для HR, доступная после входа (кнопка Войти в шапке → модалка логина/регистрации).

Функции:

- Поля:
  - Должность (строка, например “Backend разработчик”).
  - Сложность (строка: `jun`, `jun+`, `mid`, `senior` и т.п.).
- Кнопка Сформировать интервью:
  - генерируется уникальный токен интервью;
  - на бэк отправляется:

    ```json
    {
      "vacancy": "Должность: X. Сложность: Y.",
      "token": "<сгенерированный>",
      "position": "X",
      "complexity": "Y"
    }
    ```

  - бэкенд:
    - генерирует 3 кодовые задачи и 2 теоретические;
    - сохраняет их под токеном в памяти;
    - возвращает структуру интервью.

- На экране HR видит:

  - ссылку для кандидата вида `/session/<token>` — по ней кандидат попадает в реальное интервью;
  - сам токен.

Также есть отладочный блок (опционально), где можно посмотреть “сырые” данные, вернувшиеся от бэка.



 4. Кратко: основные маршруты

- `/` — главная страница платформы.
- `/demo` — описание демо‑интервью.
- `/demo/interview` — демо‑версии задач (3 кодовые + 2 текстовые).
- `/demo/report` — демо‑отчёт.

- `/session/:token` — экран согласия по приглашению.
- `/session/:token/interview` — реальное интервью по токену.
- `/session/:token/report` — отчёт по реальному интервью.

- `/hr/workshop` — мастерская HR для создания интервью (должность + сложность).



Если ты запускаешь проект впервые:

1. Подними бэкенд (`uvicorn backend:app --reload --port 8000`).
2. Подними фронт (`npm run dev` из папки `frontend`).
3. Зайди на `/` → зарегистрируйся как HR → `/hr/workshop` → создай интервью → открой сгенерированную ссылку `/session/<token>` как кандидат.