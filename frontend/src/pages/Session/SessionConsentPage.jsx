import React, { useState } from "react";
import { useNavigate, useParams, Link } from "react-router-dom";
import Button from "../../components/ui/Button.jsx";

function AssistantCard({ message }) {
  return (
    <div className="session-interview__assistant-card">
      <div className="session-interview__assistant-icon">üì±</div>
      <div>
        <div className="session-interview__assistant-message">
          {message}
        </div>
        <div className="session-interview__assistant-label">–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</div>
      </div>
    </div>
  );
}

function SessionConsentPage() {
  const navigate = useNavigate();
  const { token } = useParams();

  const [rulesAccepted, setRulesAccepted] = useState(false);
  const [trackingAccepted, setTrackingAccepted] = useState(false);

  const allAccepted = rulesAccepted && trackingAccepted;

  const handleStart = () => {
    if (!allAccepted) return;
    navigate(`/session/${token}/interview`, { replace: false });
  };

  const handleDecline = () => {
    navigate(`/session/${token}/declined`, { replace: true });
  };

  return (
    <section className="session-consent">
      <div className="session-consent__card">
        {/* –ö–∞—Ä—Ç–æ—á–∫–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ + –±–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ –ì–û–¢–û–í */}
        <AssistantCard message="–ü–†–ò–í–ï–¢! –¢–ï–ë–Ø –ü–†–ò–ì–õ–ê–°–ò–õ–ò –ù–ê –ò–ù–¢–ï–†–í–¨–Æ. –ù–ê–î–û –ë–£–î–ï–¢ –†–ï–®–ò–¢–¨ –ù–ï–°–ö–û–õ–¨–ö–û –ê–õ–ì–û–†–ò–¢–ú–ò–ß–ï–°–ö–ò–• –ò –õ–û–ì–ò–ß–ï–°–ö–ò–• –ó–ê–î–ê–ß. –î–õ–Ø –ù–ê–ß–ê–õ–ê –ü–†–û–ß–ò–¢–ê–ô –ò–ù–°–¢–†–£–ö–¶–ò–ò, –ê –ö–ê–ö –ë–£–î–ï–®–¨ –ì–û–¢–û–í ‚Äî –ù–ê–ñ–ú–ò –ù–ê –ö–ù–û–ü–ö–£" />

        <div
          className="session-consent__actions"
          style={{ marginTop: "1.5rem", marginBottom: "1.5rem" }}
        >
          <Button
            variant="primary"
            onClick={handleStart}
            disabled={!allAccepted}
          >
            –ì–û–¢–û–í
          </Button>
        </div>

        {/* –ë–ª–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏–∑ –¥–∏–∑–∞–π–Ω–∞ */}
        <div className="session-consent__instructions">
          <div className="session-consent__instructions-title">
            –ò–ù–°–¢–†–£–ö–¶–ò–Ø
          </div>
          <div className="session-consent__instructions-text">
            –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ –∏ –æ–∫–æ–Ω, –ø–æ–ø—ã—Ç–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å
            –∏–ª–∏ –≤—Å—Ç–∞–≤–ª—è—Ç—å —Ç–µ–∫—Å—Ç, –∞ —Ç–∞–∫–∂–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.
            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ—Ö–æ–¥–∏ –∏–Ω—Ç–µ—Ä–≤—å—é —á–µ—Å—Ç–Ω–æ ‚Äî —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å
            –æ–±—ä–µ–∫—Ç–∏–≤–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ç–≤–æ–∏—Ö –Ω–∞–≤—ã–∫–æ–≤.
          </div>
        </div>

        {/* –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è */}
        <h1
          className="session-consent__title"
          style={{ marginTop: "2rem" }}
        >
          –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é
        </h1>
        <p className="session-consent__intro">
          –¢—ã –ø—Ä–∏–≥–ª–∞—à—ë–Ω(–∞) –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é –Ω–∞
          –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ <strong>Safe Interview</strong>. –ò–Ω—Ç–µ—Ä–≤—å—é –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤
          –±—Ä–∞—É–∑–µ—Ä–µ –∏ –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ IDE –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ
          –≤–æ–ø—Ä–æ—Å—ã.
        </p>

        {/* –ö–∞–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∏–Ω—Ç–µ—Ä–≤—å—é */}
        <div className="session-consent__block">
          <h2>–ö–∞–∫ –±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é</h2>
          <ul>
            <li>
              –¢—ã –ø–æ–ª—É—á–∏—à—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º –∏ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ
              –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏.
            </li>
            <li>
              –ö–æ–¥ –ø–∏—à–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π —Å—Ä–µ–¥–µ.
            </li>
            <li>
              –î–ª—è —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞—Ç—å —Å–≤–æ–π –ø–æ–¥—Ö–æ–¥ –∏
              –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.
            </li>
            <li>
              –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç –æ —Ç–≤–æ—ë–º
              –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–∏.
            </li>
          </ul>
        </div>

        {/* –ü—Ä–∞–≤–∏–ª–∞ –∏ —É—Å–ª–æ–≤–∏—è (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π) */}
        <div className="session-consent__block">
          <h2>–ü—Ä–∞–≤–∏–ª–∞ –∏ —É—Å–ª–æ–≤–∏—è</h2>
          <p>
            –ß—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —á–µ—Å—Ç–Ω—É—é –∏ –æ–±—ä–µ–∫—Ç–∏–≤–Ω—É—é –æ—Ü–µ–Ω–∫—É, –≤–æ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–≤—å—é
            —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
          </p>
          <ul>
            <li>–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –æ–∫–Ω–∞;</li>
            <li>–ø–æ—Ç–µ—Ä—è —Ñ–æ–∫—É—Å–∞ –æ–∫–Ω–∞ (–ø–µ—Ä–µ—Ö–æ–¥ –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è);</li>
            <li>–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é (–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ –º—ã—à—å—é);</li>
            <li>–ø–æ–ø—ã—Ç–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—Å—Ç–∞–≤–∫–∏ —Ç–µ–∫—Å—Ç–∞/–∫–æ–¥–∞;</li>
            <li>
              –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (DevTools, F12 –∏ —Ç.–ø.).
            </li>
          </ul>
          <p>
            –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ö–æ–¥–∞ –∏–Ω—Ç–µ—Ä–≤—å—é –∏
            —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Ç–æ–≥–æ–≤–æ–π –æ—Ü–µ–Ω–∫–∏. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–≤–æ–µ–≥–æ –∫–æ–¥–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤
            –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–æ –∫–æ–º–ø–∞–Ω–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–æ–¥–∏—Ç –∏–Ω—Ç–µ—Ä–≤—å—é.
          </p>
        </div>

        {/* –ê–Ω—Ç–∏—á–∏—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å (–∂—ë—Å—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞) */}
        <div className="session-consent__block">
          <h2>–ê–Ω—Ç–∏—á–∏—Ç‚Äë–∫–æ–Ω—Ç—Ä–æ–ª—å</h2>
          <p>–í–æ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–≤—å—é –¥–µ–π—Å—Ç–≤—É—é—Ç –∂—ë—Å—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∏—Å—ã–≤–∞–Ω–∏—è:</p>
          <ul>
            <li>
              <strong>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–∏–µ –≤–∫–ª–∞–¥–∫–∏ –∏ –æ–∫–Ω–∞</strong>{" "}
              –≤–æ –≤—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á.
            </li>
            <li>
              <strong>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–¥ –∏–ª–∏ —Ç–µ–∫—Å—Ç</strong>{" "}
              (Ctrl+C, Ctrl+V, –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ –º—ã—à–∏ –∏ —Ç.–ø.).
            </li>
            <li>
              <strong>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞</strong>{" "}
              (DevTools, F12, Ctrl+Shift+I –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è).
            </li>
          </ul>
          <p>
            –ü—Ä–∏ —Ñ–∏–∫—Å–∞—Ü–∏–∏ –ø–æ–ø—ã—Ç–∫–∏ –Ω–∞—Ä—É—à–∏—Ç—å —ç—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –∏–Ω—Ç–µ—Ä–≤—å—é –º–æ–∂–µ—Ç –±—ã—Ç—å{" "}
            <strong>–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</strong>, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è
            –∑–∞—Å—á–∏—Ç–∞–Ω—ã –∫–∞–∫ –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ.
          </p>
        </div>

        {/* –ß–µ–∫–±–æ–∫—Å—ã —Å–æ–≥–ª–∞—Å–∏—è */}
        <div className="session-consent__checkboxes">
          <label className="session-consent__checkbox">
            <input
              type="checkbox"
              checked={rulesAccepted}
              onChange={(e) => setRulesAccepted(e.target.checked)}
            />
            <span>
              –Ø –æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è(–ª–∞—Å—å) —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤—å—é –∏ —É—Å–ª–æ–≤–∏—è–º–∏
              –∞–Ω—Ç–∏—á–∏—Ç‚Äë–∫–æ–Ω—Ç—Ä–æ–ª—è (–∑–∞–ø—Ä–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è/–≤—Å—Ç–∞–≤–∫–∏, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
              –≤–∫–ª–∞–¥–æ–∫, –æ—Ç–∫—Ä—ã—Ç–∏—è DevTools) –∏ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –∏–Ω—Ç–µ—Ä–≤—å—é
              –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ.
            </span>
          </label>
          <label className="session-consent__checkbox">
            <input
              type="checkbox"
              checked={trackingAccepted}
              onChange={(e) => setTrackingAccepted(e.target.checked)}
            />
            <span>
              –Ø —Å–æ–≥–ª–∞—Å–µ–Ω(–Ω–∞) –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ –≤
              —Ü–µ–ª—è—Ö –æ—Ü–µ–Ω–∫–∏ –º–æ–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ –≤–æ –≤—Ä–µ–º—è –∏–Ω—Ç–µ—Ä–≤—å—é.
            </span>
          </label>
        </div>

        {/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫–∞–∑–∞ (–ì–û–¢–û–í —É –Ω–∞—Å —É–∂–µ —Å–≤–µ—Ä—Ö—É) */}
        <div className="session-consent__actions">
          <Button variant="ghost" onClick={handleDecline}>
            –û—Ç–∫–∞–∑–∞—Ç—å—Å—è
          </Button>
        </div>

        <p className="session-consent__note">
          –ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ñ–æ—Ä–º–∞—Ç—É –∏–Ω—Ç–µ—Ä–≤—å—é, —Å–≤—è–∂–∏—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å
          –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–º –∫–æ–º–ø–∞–Ω–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–¥–∞–ª–∞ —ç—Ç—É —Å—Å—ã–ª–∫—É.
        </p>

        <p className="session-consent__small">
          <Link to="/privacy">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</Link>
        </p>
      </div>
    </section>
  );
}

export default SessionConsentPage;